<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>PlayCanvas glTF Viewer</title>
        <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no' />
        <style>
            body {
                margin: 0;
                overflow: hidden;
            }
        </style>
        <script src='https://code.playcanvas.com/playcanvas-stable.min.js'></script>
        <script src='../src/gltf-loader.js'></script>
        <script src='../src/monkey-patch.js'></script>
    </head>
    <body>
        <canvas id='application'></canvas>
        <script>
            // create a PlayCanvas application
            var canvas = document.getElementById('application');
            var app = new pc.Application(canvas, { });
            app.start();

            // fill the available space at full resolution
            app.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);
            app.setCanvasResolution(pc.RESOLUTION_AUTO);

            // ensure canvas is resized when window changes size
            window.addEventListener('resize', function() {
                app.resizeCanvas();
            });

            // load glTF model
            /*
            var url = "assets/DamagedHelmet/glTF-Embedded/DamagedHelmet.gltf";
            app.assets.loadFromUrl(url, "json", function (err, asset) {
                var gltf = JSON.parse(asset.resource);
                var root = loadGltf(gltf, app.graphicsDevice);
                app.root.addChild(root);
            });
*/
            var url = "assets/DamagedHelmet/glTF-Binary/DamagedHelmet.glb";
            app.assets.loadFromUrl(url, "binary", function (err, asset) {
                var glb = asset.resource;
                var root = loadGlb(glb, app.graphicsDevice);
                app.root.addChild(root);
            });

            // create camera entity
            var camera = new pc.Entity('camera');
            camera.addComponent('camera');

            // create directional light entity
            var light = new pc.Entity('light');
            light.addComponent('light');

            // add to hierarchy
            app.root.addChild(camera);
            app.root.addChild(light);

            // set up initial positions and orientations
            camera.setPosition(0, 0, 3);
            light.setEulerAngles(45, 0, 0);
        </script>
    </body>
</html>